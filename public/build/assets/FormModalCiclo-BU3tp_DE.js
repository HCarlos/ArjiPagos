import{k as x,C as F,J as $,z as B,o as u,w as m,f as s,t as f,u as r,A as E,e as a,B as p,g,d as h,F as w}from"./vendor-K2KSp3Ue.js";import{_ as U}from"./Modal-FSLHl1Wd.js";import{_ as A}from"./PrimaryButton-_b3jnecY.js";import{_ as N}from"./SecondaryButton-C79sIAk1.js";import{_ as t}from"./InputLabel-CerkKE1y.js";import{_ as n}from"./TextInput-DdNDDiHb.js";import{_}from"./InputError-BU6s8pqj.js";const j={class:"p-8 bg-white rounded-xl shadow-lg border border-gray-100"},S={class:"mb-6 flex items-center justify-between border-b border-gray-200 pb-4"},z={class:"text-2xl font-bold text-gray-800"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},G={class:"space-y-4"},O={class:"grid grid-cols-2 gap-4"},I={class:"space-y-4"},J={class:"relative flex items-center gap-3"},P={class:"text-sm font-medium"},T={class:"space-y-4"},q={class:"grid grid-cols-2 gap-4"},H={class:"flex justify-end gap-4 border-t border-gray-200 pt-6"},Z={__name:"FormModalCiclo",props:{show:Boolean,ciclo:{type:Object,default:()=>({})}},emits:["close","success"],setup(b,{emit:V}){const C=b,v=V,c=x(!1),y=x({}),e=F({id:0,ciclo:"",fecha_inicio:Date(),fecha_fin:Date(),predeterminado:!1,ciclo_anterior_id:0,ano_anterior:0,ano_siguiente:0});$(()=>C.ciclo,i=>{i&&Object.keys(i).length>0?(e.defaults({...i}),e.reset()):(e.reset(),e.clearErrors(),e.defaults({id:0,ciclo:"",fecha_inicio:Date(),fecha_fin:Date(),predeterminado:!1,ciclo_anterior_id:0,ano_anterior:0,ano_siguiente:0}))},{immediate:!0,deep:!0});const k=()=>{c.value=!0,y.value={};const i=e.id?"/ciclo.update":"/ciclo.store";e.transform(o=>({...o})).submit(e.id?"put":"post",i,{preserveScroll:!0,onSuccess:()=>{v("success"),d()},onError:o=>{c.value=!1,y.value=o},onFinish:()=>{c.value=!1}})},d=()=>{e.reset(),e.clearErrors(),D(),v("close")},D=()=>{e.reset(),e.clearErrors(),e.defaults({id:0,ciclo:"",fecha_inicio:Date(),fecha_fin:Date(),predeterminado:!1,ciclo_anterior_id:0,ano_anterior:0,ano_siguiente:0})};return(i,o)=>(u(),B(U,{show:b.show,onClose:d,"max-width":"2xl"},{default:m(()=>[s("div",j,[s("div",S,[s("h2",z," 📅 "+f(r(e).id?"Editar":"Nuevo")+" Ciclo ",1),s("button",{onClick:d,class:"text-gray-500 hover:text-gray-700"},o[7]||(o[7]=[s("i",{class:"fas fa-times text-lg"},null,-1)]))]),s("form",{onSubmit:E(k,["prevent"]),class:"space-y-6"},[s("div",M,[s("div",G,[s("div",null,[a(t,{value:"🏷️ Nombre del ciclo",class:"mb-2 font-medium"}),a(n,{modelValue:r(e).ciclo,"onUpdate:modelValue":o[0]||(o[0]=l=>r(e).ciclo=l),type:"text",class:p(["w-full p-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500",{"border-red-500":r(e).errors.ciclo}])},null,8,["modelValue","class"]),a(_,{message:r(e).errors.ciclo,class:"mt-1"},null,8,["message"])]),s("div",O,[s("div",null,[a(t,{value:"📅 Fecha inicio",class:"mb-2 font-medium"}),a(n,{modelValue:r(e).fecha_inicio,"onUpdate:modelValue":o[1]||(o[1]=l=>r(e).fecha_inicio=l),type:"date",class:"w-full p-3 border-2 border-gray-200 rounded-xl"},null,8,["modelValue"]),a(_,{message:r(e).errors.fecha_inicio,class:"mt-1"},null,8,["message"])]),s("div",null,[a(t,{value:"📅 Fecha fin",class:"mb-2 font-medium"}),a(n,{modelValue:r(e).fecha_fin,"onUpdate:modelValue":o[2]||(o[2]=l=>r(e).fecha_fin=l),type:"date",class:"w-full p-3 border-2 border-gray-200 rounded-xl"},null,8,["modelValue"]),a(_,{message:r(e).errors.fecha_fin,class:"mt-1"},null,8,["message"])])])]),s("div",I,[s("div",null,[a(t,{value:"⭐ Predeterminado",class:"mb-2 font-medium"}),s("div",J,[s("button",{type:"button",onClick:o[3]||(o[3]=l=>r(e).predeterminado=!r(e).predeterminado),class:p(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200",r(e).predeterminado?"bg-green-500":"bg-gray-300"])},[s("span",{class:p(["h-4 w-4 transform bg-white rounded-full transition-transform duration-200",r(e).predeterminado?"translate-x-6":"translate-x-1"])},null,2)],2),s("span",P,f(r(e).predeterminado?"Activado":"Desactivado"),1)])]),s("div",T,[s("div",null,[a(t,{value:"🔗 Ciclo anterior ID",class:"mb-2 font-medium"}),a(n,{modelValue:r(e).ciclo_anterior_id,"onUpdate:modelValue":o[4]||(o[4]=l=>r(e).ciclo_anterior_id=l),type:"number",class:"w-full p-3 border-2 border-gray-200 rounded-xl"},null,8,["modelValue"])]),s("div",q,[s("div",null,[a(t,{value:"◀️ Año anterior",class:"mb-2 font-medium"}),a(n,{modelValue:r(e).ano_anterior,"onUpdate:modelValue":o[5]||(o[5]=l=>r(e).ano_anterior=l),type:"number",class:"w-full p-3 border-2 border-gray-200 rounded-xl"},null,8,["modelValue"])]),s("div",null,[a(t,{value:"▶️ Año siguiente",class:"mb-2 font-medium"}),a(n,{modelValue:r(e).ano_siguiente,"onUpdate:modelValue":o[6]||(o[6]=l=>r(e).ano_siguiente=l),type:"number",class:"w-full p-3 border-2 border-gray-200 rounded-xl"},null,8,["modelValue"])])])])])]),s("div",H,[a(N,{onClick:d,type:"button",class:"px-6 py-3 rounded-xl bg-gray-100 hover:bg-gray-200 transition-colors"},{default:m(()=>o[8]||(o[8]=[g(" ❌ Cancelar ")])),_:1}),a(A,{type:"submit",disabled:r(e).processing,class:"px-6 py-3 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white font-semibold transition-colors"},{default:m(()=>[r(e).processing?(u(),h(w,{key:0},[o[9]||(o[9]=s("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1)),o[10]||(o[10]=g(" Guardando... "))],64)):(u(),h(w,{key:1},[g(" 💾 "+f(r(e).id?"Actualizar":"Guardar"),1)],64))]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"]))}};export{Z as default};
