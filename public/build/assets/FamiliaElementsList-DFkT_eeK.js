import{j as d,n as c,k as g,C as R,p as q,G as F,z as G,o as t,w as _,f as s,e as n,g as u,t as r,A as H,s as S,u as a,d as l,F as m,q as v,y as C,x as L,W as V}from"./vendor-K2KSp3Ue.js";import{_ as P}from"./AuthenticatedLayout-JIWfdiXR.js";import{_ as T}from"./PrimaryButton-_b3jnecY.js";import{_ as W}from"./SecondaryButton-C79sIAk1.js";/* empty css                */import{_ as B}from"./InputLabel-CerkKE1y.js";import{_ as M}from"./InputError-BU6s8pqj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"p-6 bg-white rounded-2xl shadow-sm border border-gray-100"},I={class:"mb-8 p-5 bg-indigo-50 rounded-xl border-l-4 border-indigo-600 shadow-xs"},J={class:"flex items-center justify-between gap-3"},K={class:"flex items-center gap-3"},O={class:"text-2xl font-bold text-gray-900"},Q={class:"text-indigo-700"},X={class:"mt-1 text-sm text-gray-600 font-medium"},Y={class:"mb-8 bg-gray-50 p-5 rounded-xl shadow-inner"},Z={class:"grid grid-cols-1 md:grid-cols-3 gap-5"},ss={class:"md:col-span-2 lg:col-span-1"},es=["value"],os={class:"md:col-span-2 lg:col-span-1"},ts=["value"],is={class:"md:col-span-2 lg:col-span-1 flex items-end"},rs={class:"overflow-x-auto rounded-xl border border-gray-200 shadow-xs"},ls={class:"w-full min-w-[800px]"},as={class:"divide-y divide-gray-100"},ns={class:"px-5 py-4 text-sm font-semibold text-indigo-900"},ds={class:"px-5 py-4 font-medium text-gray-900"},cs={class:"px-5 py-4"},us={class:"px-3 py-1.5 bg-indigo-100 text-indigo-800 rounded-full text-sm font-semibold shadow-xs inline-flex items-center gap-1.5"},ms={class:"px-5 py-4 font-medium text-gray-900"},ps={class:"px-5 py-4"},gs=["onClick"],fs={key:0},Fs={__name:"FamiliaElementsList",setup(xs){const y=d(()=>c().props.familiaElements),f=d(()=>c().props.familia),$=d(()=>c().props.totalFamiliasElements),A=d(()=>c().props.users),N=d(()=>c().props.roles),x=g(!1),b=g({}),h=g(0),w=g(""),i=R({familia_id:f.value.id,user_id:0,role_id:0});q(async()=>{await F(),h.value=f.value.id,w.value=f.value.familia});const k=()=>{V.reload({only:["totalFamiliasElements","familiaElements"],preserveScroll:!0,onFinish:async()=>{await F()}})},j=function(){window.history.back()},D=()=>{x.value=!0,b.value={},i.transform(e=>({...e})).submit("post","/familiaElement.store",{preserveScroll:!0,onError:e=>{x.value=!1,b.value=e},onFinish:()=>{x.value=!1,k()}})},U=p=>{if(confirm("¿Estás seguro de que deseas eliminar el Item "+p+" ?")){const e=route("familiaElement.delete",p);V["delete"](e,{preserveScroll:!0,onError:E=>{b.value=E},onFinish:()=>{k()}})}};return(p,e)=>(t(),G(P,null,{default:_(()=>[s("div",z,[s("div",I,[s("div",J,[s("div",K,[e[3]||(e[3]=s("div",{class:"p-2 bg-indigo-100 rounded-lg"},[s("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 5h1m4-5h1m-1 5h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5"})])],-1)),s("div",null,[s("h2",O,[e[2]||(e[2]=u(" 🏠 Familia: (")),s("span",Q,r(h.value),1),u(") "+r(w.value),1)]),s("p",X," 👥 "+r($.value)+" miembros registrados ",1)])]),n(W,{onClick:j,class:"flex items-center gap-2 text-indigo-600 hover:bg-indigo-50 px-4 py-2 rounded-lg transition-colors"},{default:_(()=>e[4]||(e[4]=[s("i",{class:"fas fa-arrow-left"},null,-1),s("span",{class:"hidden sm:inline"},"Regresar",-1)])),_:1})])]),s("div",Y,[s("form",{onSubmit:H(D,["prevent"]),class:"space-y-5"},[s("div",Z,[s("div",ss,[n(B,{value:"👤 Seleccionar Usuario",class:"block mb-2.5 font-semibold text-gray-800"}),S(s("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>a(i).user_id=o),class:"w-full p-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all"},[e[5]||(e[5]=s("option",{value:0,class:"text-gray-400",selected:"selected"},"-- Seleccione un usuario --",-1)),(t(!0),l(m,null,v(A.value,o=>(t(),l("option",{key:o.id,value:o.id,class:"text-gray-700"},r(o.full_name),9,es))),128))],512),[[C,a(i).user_id]]),n(M,{message:a(i).errors.user_id,class:"mt-1.5 text-red-600 text-sm font-medium"},null,8,["message"])]),s("div",os,[n(B,{value:"🎭 Asignar Rol",class:"block mb-2.5 font-semibold text-gray-800"}),S(s("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>a(i).role_id=o),class:"w-full p-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all"},[e[6]||(e[6]=s("option",{value:0,class:"text-gray-400",selected:"selected"},"-- Seleccione un rol --",-1)),(t(!0),l(m,null,v(N.value,o=>(t(),l("option",{key:o.id,value:o.id,class:"text-gray-700"},r(o.role),9,ts))),128))],512),[[C,a(i).role_id]]),n(M,{message:a(i).errors.role_id,class:"mt-1.5 text-red-600 text-sm font-medium"},null,8,["message"])]),s("div",is,[n(T,{type:"submit",class:"w-full h-[52px] flex justify-center items-center bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl shadow-md transition-all",disabled:a(i).processing},{default:_(()=>[a(i).processing?(t(),l(m,{key:0},[e[7]||(e[7]=s("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1)),e[8]||(e[8]=u(" ⏳ Procesando... "))],64)):(t(),l(m,{key:1},[u(" ✅ Agregar Miembro ")],64))]),_:1},8,["disabled"])])])],32)]),s("div",rs,[s("table",ls,[e[11]||(e[11]=s("thead",{class:"bg-indigo-50"},[s("tr",{class:"text-left text-sm font-semibold text-indigo-900"},[s("th",{class:"px-5 py-4 border-b border-indigo-100"},"#ID"),s("th",{class:"px-5 py-4 border-b border-indigo-100"},"Usuario"),s("th",{class:"px-5 py-4 border-b border-indigo-100"},"Rol Asignado"),s("th",{class:"px-5 py-4 border-b border-indigo-100"},"Grupo"),s("th",{class:"px-5 py-4 border-b border-indigo-100 w-28"},"Acciones")])],-1)),s("tbody",as,[(t(!0),l(m,null,v(y.value,o=>(t(),l("tr",{key:o.id,class:"hover:bg-indigo-50/30 transition-colors group"},[s("td",ns,r(o.id),1),s("td",ds,r(o.usuario),1),s("td",cs,[s("span",us,[e[9]||(e[9]=s("span",{class:"w-2 h-2 bg-indigo-400 rounded-full"},null,-1)),u(" "+r(o.role),1)])]),s("td",ms,r(o.grupo),1),s("td",ps,[s("button",{onClick:E=>U(o.id),class:"text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors group-hover:opacity-100",title:"Eliminar permanentemente"}," 🗑️ ",8,gs)])]))),128)),y.value.length===0?(t(),l("tr",fs,e[10]||(e[10]=[s("td",{colspan:"4",class:"px-5 py-6 text-center text-gray-500 italic"}," 📭 No se encontraron registros ",-1)]))):L("",!0)])])])])]),_:1}))}};export{Fs as default};
