import{j as m,n as g,k as p,C as M,p as P,G as R,z as A,o as a,w as v,f as e,e as d,g as c,t as i,A as q,s as H,u as r,d as n,F as u,q as C,y as L,B as f,x as S,W as $,$ as T}from"./vendor-Mf1CNb9E.js";import{_ as W}from"./AuthenticatedLayout-DVEoqzbI.js";import{_ as G}from"./PrimaryButton-BHT_Es18.js";import{_ as U}from"./SecondaryButton-BFSfs1Pf.js";/* empty css                */import{_ as B}from"./InputLabel-BzSsAvK3.js";import{_ as N}from"./InputError-DqGi1oU4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"p-6 bg-white rounded-2xl shadow-sm border border-gray-100"},J={class:"mb-8 p-5 bg-indigo-50 rounded-xl border-l-4 border-indigo-600 shadow-xs"},K={class:"flex items-center justify-between gap-3"},O={class:"flex items-center gap-3"},Q={class:"text-2xl font-bold text-gray-900"},X={class:"text-indigo-700"},Y={class:"mt-1 text-sm text-gray-600 font-medium"},Z={class:"mb-8 bg-gray-50 p-5 rounded-xl shadow-inner"},ee={class:"grid grid-cols-1 md:grid-cols-3 gap-5"},se={class:"md:col-span-2 lg:col-span-1"},te=["value"],oe={class:"md:col-span-2 lg:col-span-1"},ie={class:"inline-flex rounded-xl bg-gray-100 p-1"},re={class:"md:col-span-2 lg:col-span-1 flex items-end"},ae={class:"overflow-x-auto rounded-xl border border-gray-200 shadow-xs"},ne={class:"w-full min-w-[800px]"},le={class:"divide-y divide-gray-100"},de={class:"px-5 py-4 text-sm font-semibold text-indigo-900"},ce={class:"px-5 py-4 font-medium text-gray-900"},me={class:"px-5 py-4"},ge={class:"px-3 py-1.5 bg-indigo-100 text-indigo-800 rounded-full text-sm font-semibold shadow-xs inline-flex items-center gap-1.5"},pe={class:"px-5 py-4"},ue={class:"flex items-center justify-center gap-2"},fe={key:0,class:"absolute -top-1 -right-1 inline-flex h-3 w-3 animate-ping rounded-full bg-green-400 opacity-75"},xe={class:"px-5 py-4"},be=["onClick"],_e={key:0},$e={__name:"FamiliaRegFisList",setup(ve){const y=m(()=>g().props.familiaRegFis),j=m(()=>g().props.totalFamiliasRegFis),x=m(()=>g().props.familia),D=m(()=>g().props.registrosfiscales),b=p(!1),_=p({}),h=p(0),w=p(""),o=M({familia_id:x.value.id,registrofiscal_id:0,predeterminado:!1});P(async()=>{await R(),h.value=x.value.id,w.value=x.value.familia});const F=()=>{$.reload({only:["familiaRegFis","totalFamiliasRegFis"],preserveScroll:!0,onFinish:async()=>{await R()}})},V=function(){window.history.back()},z=()=>{b.value=!0,_.value={};const l="/familiaRegFis.store";console.log("form",o.predeterminado),o.transform(s=>({...s})).submit("post",l,{preserveScroll:!0,onError:s=>{b.value=!1,_.value=s},onFinish:()=>{b.value=!1,F()}})},E=l=>{if(confirm("¿Estás seguro de que deseas eliminar el Item "+l+" ?")){const s=route("familiaRegFis.delete",l);$["delete"](s,{preserveScroll:!0,onError:k=>{_.value=k},onFinish:()=>{T("#tblData-"+l).remove(),F()}})}};return(l,s)=>(a(),A(W,null,{default:v(()=>[e("div",I,[e("div",J,[e("div",K,[e("div",O,[s[4]||(s[4]=e("div",{class:"p-2 bg-indigo-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 5h1m4-5h1m-1 5h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5"})])],-1)),e("div",null,[e("h2",Q,[s[3]||(s[3]=c(" 🏠 Familia: (")),e("span",X,i(h.value),1),c(") "+i(w.value),1)]),e("p",Y," 👥 "+i(j.value)+" RFC's asignados ",1)])]),d(U,{onClick:V,class:"flex items-center gap-2 text-indigo-600 hover:bg-indigo-50 px-4 py-2 rounded-lg transition-colors"},{default:v(()=>s[5]||(s[5]=[e("i",{class:"fas fa-arrow-left"},null,-1),e("span",{class:"hidden sm:inline"},"Regresar",-1)])),_:1})])]),e("div",Z,[e("form",{onSubmit:q(z,["prevent"]),class:"space-y-5"},[e("div",ee,[e("div",se,[d(B,{value:"👤 Seleccionar un RFC",class:"block mb-2.5 font-semibold text-gray-800"}),H(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>r(o).registrofiscal_id=t),class:"w-full p-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all"},[s[6]||(s[6]=e("option",{value:0,class:"text-gray-400",selected:"selected"},"-- Seleccione un RFC --",-1)),(a(!0),n(u,null,C(D.value,t=>(a(),n("option",{key:t.id,value:t.id,class:"text-gray-700"},i(t.rfc)+" - "+i(t.razon_social_cfdi_40),9,te))),128))],512),[[L,r(o).registrofiscal_id]]),d(N,{message:r(o).errors.registrofiscal_id,class:"mt-1.5 text-red-600 text-sm font-medium"},null,8,["message"])]),e("div",oe,[d(B,{value:"👤 Predeterminado",class:"block mb-2.5 font-semibold text-gray-800"}),e("div",ie,[e("button",{type:"button",onClick:s[1]||(s[1]=t=>r(o).predeterminado=!0),class:f(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",r(o).predeterminado?"bg-indigo-600 text-white":"text-gray-600 hover:bg-gray-200"])}," Sí ",2),e("button",{type:"button",onClick:s[2]||(s[2]=t=>r(o).predeterminado=!1),class:f(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",r(o).predeterminado?"text-gray-600 hover:bg-gray-200":"bg-indigo-600 text-white"])}," No ",2)]),d(N,{message:r(o).errors.predeterminado,class:"mt-1.5 text-red-600 text-sm font-medium"},null,8,["message"])]),e("div",re,[d(G,{type:"submit",class:"w-full h-[52px] flex justify-center items-center bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl shadow-md transition-all",disabled:r(o).processing},{default:v(()=>[r(o).processing?(a(),n(u,{key:0},[s[7]||(s[7]=e("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1)),s[8]||(s[8]=c(" ⏳ Procesando... "))],64)):(a(),n(u,{key:1},[c(" ✅ Agregar RFC ")],64))]),_:1},8,["disabled"])])])],32)]),e("div",ae,[e("table",ne,[s[11]||(s[11]=e("thead",{class:"bg-indigo-50"},[e("tr",{class:"text-left text-sm font-semibold text-indigo-900"},[e("th",{class:"px-5 py-4 border-b border-indigo-100"},"#ID"),e("th",{class:"px-5 py-4 border-b border-indigo-100"},"RFC"),e("th",{class:"px-5 py-4 border-b border-indigo-100"},"Razón Social"),e("th",{class:"px-5 py-4 border-b border-indigo-100"},"Predeterminado"),e("th",{class:"px-5 py-4 border-b border-indigo-100 w-28"},"Acciones")])],-1)),e("tbody",le,[(a(!0),n(u,null,C(y.value,t=>(a(),n("tr",{key:t.id,class:"hover:bg-indigo-50/30 transition-colors group"},[e("td",de,i(t.id),1),e("td",ce,i(t.rfc),1),e("td",me,[e("span",ge,[s[9]||(s[9]=e("span",{class:"w-2 h-2 bg-indigo-400 rounded-full"},null,-1)),c(" "+i(t.razon_social_cfdi_40),1)])]),e("td",pe,[e("div",ue,[e("span",{class:f(["relative inline-flex h-6 w-6 items-center justify-center rounded-full",t.predeterminado?"bg-green-100":"bg-red-100"])},[c(i(t.predeterminado?"⭐":"🚫")+" ",1),t.predeterminado?(a(),n("span",fe)):S("",!0)],2),e("span",{class:f(["text-sm font-medium",t.predeterminado?"text-green-700":"text-red-700"])},i(t.predeterminado?"Default":"Normal"),3)])]),e("td",xe,[e("button",{onClick:k=>E(t.id),class:"text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors group-hover:opacity-100",title:"Eliminar permanentemente"}," 🗑️ ",8,be)])]))),128)),y.value.length===0?(a(),n("tr",_e,s[10]||(s[10]=[e("td",{colspan:"4",class:"px-5 py-6 text-center text-gray-500 italic"}," 📭 No se encontraron registros ",-1)]))):S("",!0)])])])])]),_:1}))}};export{$e as default};
