import{$ as x}from"./jquery-S2mROG-R.js";import{j as i,h as b,i as h,k as S,l as y,s as N,e as p,o as a,w as _,b as e,t as v,p as T,a as j,x as z,d as L,c as g,F as w,q as C,y as R,n as H,g as q,W as k}from"./app-CZGOCcSJ.js";import{_ as A}from"./AuthenticatedLayout-iEb0P4Xv.js";/* empty css                                  */import{_ as U}from"./PrimaryButton-DpTGI6TH.js";/* empty css                */import W from"./FormModalFamilia-DXhiu2y8.js";import"./dataTables-DnyxKUbT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-GJSMBy2M.js";import"./InputLabel-7aYgg88u.js";import"./TextInput-4a5YXbIf.js";import"./InputError-CDbrJZig.js";import"./SecondaryButton-DM7Bzky-.js";const P={class:"p-6 bg-white rounded-2xl shadow-sm border border-gray-100"},G={class:"mb-6 p-5 bg-indigo-50 rounded-xl border-l-4 border-indigo-600 shadow-xs flex items-center justify-between"},I={class:"flex items-center gap-4"},J={class:"text-2xl font-bold text-gray-900"},K={class:"flex items-center gap-3"},O={class:"mb-6 flex flex-col md:flex-row gap-4 items-center justify-between"},Q={action:"/familias",class:"w-full md:w-auto flex gap-2"},X={class:"flex gap-1"},Y={class:"overflow-x-auto rounded-xl border border-gray-200 shadow-xs"},Z={class:"w-full min-w-[600px]"},ee={class:"divide-y divide-gray-100"},oe={class:"px-5 py-4 text-sm font-semibold text-indigo-900"},te={class:"px-5 py-4 font-medium text-gray-900"},se={class:"px-5 py-4 flex items-center gap-2"},le=["onClick"],ae=["onClick"],ie=["onClick"],re=["onClick"],ne={key:0},ke={__name:"FamiliasList",setup(de){i(null);const r=b(()=>h().props.familias),F=b(()=>h().props.totalFamilias),n=i(""),d=i(!1),l=i({});i("nuevo"),S(async()=>{await y()}),N(()=>{});const M=()=>{k.reload({only:["totalFamilias","familias"],preserveScroll:!0,onFinish:async()=>{await y(),d.value=!1,l.value=null,console.log("🔥 Datos actualizados (modo desarrollo)",r.value.data)}})},f=s=>{l.value=s!==null?{...s}:{},console.log("Ventana open recibido",l.value),d.value=!0},$=()=>{l.value=null,d.value=!1,console.log("Ventana close recibido")},B=function(){window.location.reload()},D=s=>{if(confirm("¿Estás seguro de que deseas eliminar el Item "+s+" ?")){const o=route("familia.delete",s);k["delete"](o,{preserveScroll:!0,onSuccess:()=>{x("#tblData-"+s).remove()},onError:c=>{errors.value=c},onFinish:()=>{x("#tblData-"+s).remove()}})}},E=s=>{l.value=s!==null?{...s}:{},window.location.href="/familiaElements/"+l.value.id},V=s=>{l.value=s!==null?{...s}:{},window.location.href="/familiaRegFis/"+l.value.id};return(s,o)=>(a(),p(A,null,{default:_(()=>{var m,c;return[e("div",P,[e("div",G,[e("div",I,[o[3]||(o[3]=e("div",{class:"p-2.5 bg-indigo-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),e("div",null,[e("h1",J," 📚 ("+v(F.value)+") Familias ",1),o[2]||(o[2]=e("p",{class:"mt-1 text-sm text-gray-600 font-medium"}," Catálogo general ",-1))])]),e("div",K,[e("button",{onClick:o[0]||(o[0]=t=>f(null)),class:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Agregar nueva familia"},o[4]||(o[4]=[e("i",{class:"fas fa-plus-circle fa-lg"},null,-1)])),e("button",{onClick:B,class:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Recargar datos"},o[5]||(o[5]=[e("i",{class:"fas fa-sync-alt fa-lg"},null,-1)])),(a(),p(W,{key:((c=(m=l.value)==null?void 0:m.value)==null?void 0:c.id)??"nuevo",show:d.value,familia:l.value,onClose:$,onSuccess:M},null,8,["show","familia"]))])]),e("div",O,[e("form",Q,[T(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=t=>n.value=t),name:"search",id:"search",placeholder:"🔍 Buscar familia...",class:"w-full md:w-64 p-2.5 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-all"},null,512),[[z,n.value]]),j(U,{type:"submit",class:"h-[42px] px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl shadow-md",show:n.value.length===0,disabled:n.value.length===0},{default:_(()=>o[6]||(o[6]=[L(" Buscar ")])),_:1},8,["show","disabled"])]),e("nav",X,[(a(!0),g(w,null,C(r.value.links,(t,u)=>(a(),p(R(t.url?"a":"span"),{href:t.url,class:H(["px-3 py-1.5 rounded-lg transition-colors",{"bg-indigo-600 text-white":t.active,"text-gray-700 hover:bg-gray-100":!t.active&&t.url,"text-gray-400":!t.url}]),innerHTML:t.label},null,8,["href","class","innerHTML"]))),256))])]),e("div",Y,[e("table",Z,[o[8]||(o[8]=e("thead",{class:"bg-indigo-50"},[e("tr",{class:"text-left text-sm font-semibold text-indigo-900"},[e("th",{class:"px-5 py-4 border-b border-indigo-100"},"ID"),e("th",{class:"px-5 py-4 border-b border-indigo-100"},"Familia"),e("th",{class:"px-5 py-4 border-b border-indigo-100 w-48"},"Acciones")])],-1)),e("tbody",ee,[(a(!0),g(w,null,C(r.value.data,t=>(a(),g("tr",{key:t.id,class:"hover:bg-indigo-50/30 transition-colors group"},[e("td",oe,v(t.id),1),e("td",te,v(t.familia),1),e("td",se,[e("button",{onClick:u=>D(t.id),class:"text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"Eliminar"}," 🗑️ ",8,le),e("button",{onClick:u=>f(t),class:"text-blue-500 hover:text-blue-700 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"Editar"}," ✏️ ",8,ae),e("button",{onClick:u=>E(t),class:"text-green-500 hover:text-green-700 p-2 rounded-lg hover:bg-green-50 transition-colors",title:"Miembros"}," 👥 ",8,ie),e("button",{onClick:u=>V(t),class:"text-purple-500 hover:text-purple-700 p-2 rounded-lg hover:bg-purple-50 transition-colors",title:"Registros Fiscales"}," 💳 ",8,re)])]))),128)),r.value.data.length===0?(a(),g("tr",ne,o[7]||(o[7]=[e("td",{colspan:"3",class:"px-5 py-6 text-center text-gray-500 italic"}," 📭 No se encontraron familias ",-1)]))):q("",!0)])])])])]}),_:1}))}};export{ke as default};
