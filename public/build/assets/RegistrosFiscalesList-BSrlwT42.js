import{h as m,i as u,j as r,k as D,l as v,s as B,e as M,o as f,w as i,b as s,a,t as l,d as w,p as S,x as T,c as b,F as V,q as z,W as y}from"./app-CZGOCcSJ.js";import{_ as E}from"./AuthenticatedLayout-iEb0P4Xv.js";import{_ as N}from"./Pagination-BQqXtQM-.js";import{i as j,d as Z}from"./arjiapp-C-OsTUmi.js";import{$ as k}from"./jquery-S2mROG-R.js";/* empty css                                  */import"./dataTables-DnyxKUbT.js";import{_ as q}from"./PrimaryButton-DpTGI6TH.js";import{_}from"./SecondaryButton-DM7Bzky-.js";import A from"./FormModalRegistroFiscal-DYY7Nx2D.js";/* empty css                */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-GJSMBy2M.js";import"./InputLabel-7aYgg88u.js";import"./TextInput-4a5YXbIf.js";import"./InputError-CDbrJZig.js";import"./Checkbox-DhbmBV7a.js";const L={class:"p-4 bg-white rounded-lg shadow-xs"},U={class:"inline-flex overflow-hidden mb-4 w-full bg-white rounded-lg shadow-md"},W={class:"px-4 py-2 -mx-3 w-full"},G={class:"mx-3 float-start"},H={class:"font-semibold text-blue-500"},J={class:"float-end px-4 py-3 text-xs font-semibold tracking-wide text-gray-500 uppercase sm:grid-cols-9"},K={action:"/registros_fiscales_list"},O={class:"float-end px-4 py-3 text-xs font-semibold tracking-wide text-gray-500 uppercase sm:grid-cols-9"},P={class:"mt-6 overflow-x-auto"},Q={id:"datasTable",class:"w-full whitespace-no-wrap"},X={class:"bg-white divide-y"},Y=["id"],I={class:"px-4 py-3 text-sm"},ss={class:"px-4 py-3 text-sm"},ts={class:"px-4 py-3 text-sm"},es={class:"px-4 py-3 text-sm"},os={class:"px-4 py-3 text-sm"},as={class:"px-4 py-3 text-sm td-buttons"},ks={__name:"RegistrosFiscalesList",setup(ls){const x=m(()=>u().props.registros),F=m(()=>u().props.regimenes_fiscales),R=m(()=>u().props.totalRegFis),n=r(""),d=r(!1),h=r({}),c=r(null),g=(o=null)=>{h.value=o??{},d.value=!0},C=()=>{y.reload({only:["totalRegFis","registros","regimenes_fiscales"],preserveScroll:!0,onFinish:async()=>{await v(),c.value&&(c.value.clear().rows.add(props.registros).draw(),console.log("ðŸ”¥ Datos actualizados (modo desarrollo)",props.registros))}})};D(async()=>{await v(),j(c)}),B(()=>{Z()});const $=o=>{if(confirm("Â¿EstÃ¡s seguro de que deseas eliminar el registro "+o+" ?")){const t=route("regfis.delete",o);y["delete"](t,{preserveScroll:!0,onSuccess:()=>{alert("El registro fiscal "+o+" fue eliminado correctamente"),k("#tblRegFis-"+o).remove()},onError:p=>{errors.value=p},onFinish:()=>{k("#tblRegFis-"+o).remove()}})}};return(o,t)=>(f(),M(E,null,{default:i(()=>[s("div",L,[s("div",U,[t[6]||(t[6]=s("div",{class:"flex justify-center items-center w-12 bg-blue-500"},[s("svg",{"data-slot":"icon","aria-hidden":"true",fill:"none","stroke-width":"1.5",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 text-white"},[s("path",{d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),s("div",W,[s("span",G,[s("span",H,"("+l(R.value)+") Registros Fiscales",1),t[3]||(t[3]=s("p",{class:"text-sm text-gray-600"},"CatÃ¡lago general",-1))]),a(_,{onClick:t[0]||(t[0]=e=>g())},{default:i(()=>t[4]||(t[4]=[s("i",{class:"mr-2 fas fa-plus"},null,-1),w(" Nuevo Registro ")])),_:1}),a(A,{show:d.value,registro:h.value,regimenes_fiscales:F.value,onClose:t[1]||(t[1]=e=>d.value=!1),onSuccess:C},null,8,["show","registro","regimenes_fiscales"]),s("span",J,[s("form",K,[S(s("input",{type:"text",name:"search","onUpdate:modelValue":t[2]||(t[2]=e=>n.value=e),id:"search",placeholder:"Buscar..."},null,512),[[T,n.value]]),a(q,{"class-btn":"float-end ml-2",show:n.value.length===0,disabled:n.value.length===0,type:"submit"},{default:i(()=>t[5]||(t[5]=[w("Buscar")])),_:1},8,["show","disabled"])])]),s("span",O,[a(N,{links:x.value.links},null,8,["links"])])])]),s("div",P,[s("table",Q,[t[9]||(t[9]=s("thead",null,[s("tr",{class:"text-xs font-semibold tracking-wide text-left text-gray-500 uppercase bg-gray-50 border-b"},[s("th",{class:"px-4 py-3"},"ID"),s("th",{class:"px-4 py-3"},"RFC"),s("th",{class:"px-4 py-3"},"RazÃ³n Social CFDi 4.0"),s("th",{class:"px-4 py-3"},"Regimen Fiscal"),s("th",{class:"px-4 py-3"},"Domicilio Fiscal"),s("th",{class:"px-4 py-3"})])],-1)),s("tbody",X,[(f(!0),b(V,null,z(x.value.data,e=>(f(),b("tr",{key:e.id,class:"text-gray-700 delete-button",id:"tblRegFis-"+e.id},[s("td",I,l(e.id),1),s("td",ss,l(e.rfc),1),s("td",ts,l(e.razon_social),1),s("td",es,l(e.regimen_fiscal.formatted_regimen_fiscal),1),s("td",os,l(e.calle+" "+e.num_ext+" "+e.num_int+" "+e.colonia+" "+e.localidad),1),s("td",as,[a(_,{as:"button",onClick:p=>$(e.id),class:"icon-button-trash"},{default:i(()=>t[7]||(t[7]=[s("i",{class:"fa fa-trash"},null,-1)])),_:2},1032,["onClick"]),a(_,{as:"button",onClick:p=>g(e),class:"icon-button-edit"},{default:i(()=>t[8]||(t[8]=[s("i",{class:"fa fa-edit"},null,-1)])),_:2},1032,["onClick"])])],8,Y))),128))])])])])]),_:1}))}};export{ks as default};
